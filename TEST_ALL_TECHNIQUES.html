<!DOCTYPE html>
<html>
<head>
    <title>Test All Facilitation Techniques</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f0f0; }
        .technique { background: white; padding: 15px; margin: 10px 0; border-radius: 5px; }
        button { background: #4CAF50; color: white; padding: 10px 20px; border: none; cursor: pointer; margin: 5px; }
        .result { margin-top: 10px; padding: 10px; background: #e8f5e9; }
    </style>
</head>
<body>
    <h1>üéØ Test All Facilitation Techniques</h1>
    <p>Click each button to generate a session plan with different facilitation technique</p>

    <div class="technique">
        <h3>1. Trainer Guided</h3>
        <button onclick="test('Trainer Guided')">Generate</button>
        <div id="result1"></div>
    </div>

    <div class="technique">
        <h3>2. Group Discussion</h3>
        <button onclick="test('Group Discussion')">Generate</button>
        <div id="result2"></div>
    </div>

    <div class="technique">
        <h3>3. Simulation</h3>
        <button onclick="test('Simulation')">Generate</button>
        <div id="result3"></div>
    </div>

    <div class="technique">
        <h3>4. Brainstorming</h3>
        <button onclick="test('Brainstorming')">Generate</button>
        <div id="result4"></div>
    </div>

    <div class="technique">
        <h3>5. Jigsaw</h3>
        <button onclick="test('Jigsaw')">Generate</button>
        <div id="result5"></div>
    </div>

    <div class="technique">
        <h3>6. Experiential Learning</h3>
        <button onclick="test('Experiential Learning')">Generate</button>
        <div id="result6"></div>
    </div>

    <script>
        async function test(technique) {
            const resultId = {
                'Trainer Guided': 'result1',
                'Group Discussion': 'result2',
                'Simulation': 'result3',
                'Brainstorming': 'result4',
                'Jigsaw': 'result5',
                'Experiential Learning': 'result6'
            }[technique];
            
            const result = document.getElementById(resultId);
            result.innerHTML = '‚è≥ Generating...';
            
            try {
                const response = await fetch('https://rtb-document-planner.onrender.com/session-plans', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        user_phone: "+250789751597",
                        sector: "ICT",
                        trade: "Programming",
                        module_code_title: "PRG101 - C Programming",
                        topic_of_session: "WHILE loops in C",
                        learning_outcomes: "Understand WHILE loop syntax",
                        indicative_contents: "Loop syntax, conditions, examples",
                        duration: "45 minutes",
                        facilitation_techniques: technique,
                        trainer_name: "John Doe",
                        date: "2024-01-15",
                        term: "Term 1",
                        class_name: "Class A",
                        number_of_trainees: "25"
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    const dlUrl = `https://rtb-document-planner.onrender.com/session-plans/${data.id}/download?phone=%2B250789751597`;
                    const dlResponse = await fetch(dlUrl);
                    
                    if (dlResponse.ok) {
                        const blob = await dlResponse.blob();
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `${technique.replace(/ /g, '_')}_Session_Plan.docx`;
                        a.click();
                        
                        result.innerHTML = `<div class="result">‚úÖ Downloaded! (${blob.size} bytes)<br>Check: Activities specific to ${technique}</div>`;
                    } else {
                        result.innerHTML = `‚ùå Download failed`;
                    }
                } else {
                    result.innerHTML = `‚ùå Creation failed`;
                }
            } catch (error) {
                result.innerHTML = `‚ùå Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>
